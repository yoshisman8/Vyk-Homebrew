{"_id":"oYoWBpcUKTPzM9OU","name":"Lingering Shielding","type":"script","author":"MIb5Ldg8TLeVngZ1","img":"icons/magic/time/arrows-circling-pink.webp","scope":"global","command":"if (!actor) {\n    ui.notifications.warn(\"You must have an actor selected\");\n} else {\n    const skillName = \"Arcana\";\n    const skillKey = \"arc\";\n    const actionSlug = \"lingering-shielding\"\n    const actionName = \"Lingering Shielding\"\n    \n    const modifiers = []\n    // list custom modifiers for a single roll here\n    //const modifiers = [\n    //new game.pf2e.Modifier('Expanded Healer\\'s Tools', 1, 'item')\n    //];\n    const level = actor.data.data.details.level.value;\n    console.log(level);\n    \n    const DC = 14 + level + Math.floor(level/3);\n    \n    console.log(DC);\n    \n    const notes = [...token.actor.data.data.skills[skillKey].notes, {\"outcome\":[\"success\"], \"selector\":\"arcana\", \"text\":'<p><b>Success</b> Your next @Compendium[vyk-homebrew.artifact-sage.4fMSeyvD81irVye8]{Aegis Shield} lasts for 3 rounds.</p>'}, {\"outcome\":[\"criticalSuccess\"], \"selector\":\"arcana\", \"text\":'<p><b>Success</b> Your next @Compendium[vyk-homebrew.artifact-sage.4fMSeyvD81irVye8]{Aegis Shield} lasts for 4 rounds.</p>'}]; // add more notes if necessary\n    const options = token.actor.getRollOptions(['all', 'skill-check', skillName.toLowerCase()]);\n    options.push(`action:${actionSlug}`); // add more traits here in new lines\n    options.push(`bookmaking`);\n    game.pf2e.Check.roll(\n    new game.pf2e.CheckModifier(\n        `<b>${actionName}</b> - <p class=\"compact-text\">${skillName } Skill Check</p>`,\n        token.actor.data.data.skills[skillKey], modifiers ),\n        { actor: token.actor, type: 'skill-check', options, notes, dc: {value: DC}},\n        event\n        //for callback: ,(Roll) => {console.log(Roll);}\n    );\n  \n}","folder":null,"sort":0,"permission":{"default":0,"MIb5Ldg8TLeVngZ1":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.bqHYVLftQUZhhCDQ"}}}
