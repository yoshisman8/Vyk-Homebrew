{"_id":"wHSe4okVp68stwTq","name":"Shadow Slice","permission":{"default":0,"Hd78v3MT5k8h1PqQ":3},"type":"script","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.v8wuldnOV1j4RwZZ"}},"scope":"global","command":"const weapon = 'Jarnbjorn'; //rename to your weapon\nconst dice = '1d12'; //change to match your weapon name\n\nif (!actor){\n        ui.notifications.warn(\"You must have an actor selected.\");\n        return;\n    }\n    \n(async() =>{\n    let roll = new Roll(dice).roll();\n    \n    await actor.addCustomModifier(\"damage\", \"Shadow Slice\", roll._total, \"status\");\n    \n    (actor.data.data.actions ?? []).filter(action => action.type === 'strike').find(strike => strike.name === weapon)?.damage(event);\n    \n    await actor.removeCustomModifier(\"damage\", \"Shadow Slice\");\n    \n    await actor.update({'data.attributes.hp.value': actor.data.data.attributes.hp.value - roll._total});\n})();","author":"Hd78v3MT5k8h1PqQ","img":"Homebrew/Blood_Weapon.png","actorIds":[]}
{"_id":"zvBS8c7XuA0s5Bea","name":"Darkside","permission":{"default":0,"Hd78v3MT5k8h1PqQ":3},"type":"script","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.NmHKGxiIFqQH8ScH"}},"scope":"global","command":"const DARKSIDE_DAMAGE = 2; // increase for giant instinct or higher levels\nconst DARKSIDE_INTIMIDATION = 1;\n\nlet message = \"\";\n\n(async () => {\n    if (actor) {\n    for (let token of canvas.tokens.controlled) {\n      if (\n        (token.actor.data.data.customModifiers[\"damage\"] || []).some(\n          (modifier) => modifier.name === \"Darkside\"\n        )\n      ) {\n        await actor.removeCustomModifier(\"intimidation\", \"Darkside\");\n        await actor.removeCustomModifier(\"damage\", \"Darkside\");\n        await PF2eStatusEffects.setStatus(token, [{ name: 'drained', value: '0' }])\n        await actor.update({'data.attributes.hp.value': actor.data.data.attributes.hp.value - actor.data.data.details.level.value});\n        if (\n          token.data.effects.includes(\n            \"Homebrew/Blackblood.png\"\n          )\n        ) {\n          token.toggleEffect(\"Homebrew/Blackblood.png\");\n        }\n      } else {\n        \n        await actor.addCustomModifier(\"intimidation\", \"Darkside\", DARKSIDE_INTIMIDATION, \"status\");\n        await actor.addCustomModifier(\"damage\", \"Darkside\", DARKSIDE_DAMAGE, \"status\");\n        PF2eStatusEffects.setStatus(token, [{ name: 'drained', value: '1' }])\n        \n        if (\n          !token.data.effects.includes(\n            \"Homebrew/Blackblood.png\"\n          )\n        ) {\n          token.toggleEffect(\"Homebrew/Blackblood.png\");\n        }\n      }\n    }\n  } else {\n    ui.notifications.warn(\"You must have an actor selected.\");\n  }\n})();","author":"Hd78v3MT5k8h1PqQ","img":"Homebrew/Blackblood.png","actorIds":[]}
{"$$deleted":true,"_id":"zvBS8c7XuA0s5Bea"}
